<!DOCTYPE html>
<html lang="en">

<head>
   <%- include('./partials/head')%>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="stylesheet" href="/css/categoria.css">
   <link rel="stylesheet" href="/css/header.css">
   <link rel="stylesheet" href="/css/footer.css">
   <title>Scorpion Tabacaria</title>
</head>

<body>


   <%- include('partials/header-navbar') %>


   <h1>Listagem dos Produtos</h1>

   <div class="container-categoria">
      <% products.map((product) => { %>
      <div class="descricao">

         <div class="img-carrinho">
          


               
      

         </div>

         <img class="productImage" src="<%= product.image_path%>" alt="imagem do produto">

         <h4><%= product.name %></h4>

         <p>R$<%= product.price %></p>

         <a href="/detalhe/<%=product.id %>">Detalhe do produto</a>

         <input type="number" value="1" min="1" max="10" id="qtd">

         <button type="button" id="add" id="<% product.id %>" onclick="AddCarrinho('<%= product.name %>', document.getElementsByClassName('productImage').namedItem, document.getElementById('qtd').value, '<%= product.price %>', 1)"> Comprar </button>

         <script>
            function AddCarrinho(produto, imagem, qtd, valor, posicao)
            { 
            localStorage.setItem("produto" + posicao, produto);
            localStorage.setItem("imagem" + posicao, imagem);
            localStorage.setItem("qtd" + posicao, qtd);
            valor = valor * qtd;
            localStorage.setItem("valor" + posicao, valor);
            alert("Produto adicionado ao carrinho!");
            }
           </script>
           
      </div>
      <% }) %>

   </div>



   <%- include('partials/footer') %>


</body>

</html>